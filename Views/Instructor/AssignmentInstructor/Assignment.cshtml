@model IEnumerable<BTL_QuanLyLopHocTrucTuyen.Models.Assignment>
@{
    ViewData["Title"] = "Danh s√°ch b√†i t·∫≠p";
    Layout = "~/Views/Instructor/Shared/_InstructorLayout.cshtml";
}
@* <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> *@
<link rel="stylesheet" href="~/css/Instructor/Assignment/Assignment.css" asp-append-version="true" />

<div class="content-main">
    <!-- ===== Header ===== -->
    <div class="header-assignment">
        <h4><i class="bi bi-journal-check me-2"></i>Danh s√°ch b√†i t·∫≠p</h4>

        <div class="header-actions">
            <div class="search-box">
                <i class="bi bi-search"></i>
                <input type="search" class="search-input" placeholder="T√¨m ki·∫øm b√†i t·∫≠p...">
            </div>

            <select class="form-select sort-select">
                <option value="newest" selected>M·ªõi nh·∫•t</option>
                <option value="oldest">C≈© nh·∫•t</option>
                <option value="deadline">Theo h·∫°n n·ªôp</option>
                <option value="type">Theo lo·∫°i b√†i t·∫≠p</option>
                <option value="score">Theo ƒëi·ªÉm t·ªëi ƒëa</option>
            </select>

            <a asp-action="AddAssignment" asp-controller="AssignmentInstructor">
                <button class="btn-add">
                    <i class="bi bi-plus-lg"></i> T·∫°o b√†i t·∫≠p m·ªõi
                </button>
            </a>
        </div>
    </div>

    <hr />

    <!-- ===== Danh s√°ch b√†i t·∫≠p ===== -->
    @if (Model != null && Model.Any())
    {
        <div class="assignment-list">
            @foreach (var item in Model)
            {
                <div class="assignment-card" data-id="@item.Id">
                    <div class="assignment-info">
                        <h5 class="assignment-title">@item.Title</h5>
                        <p class="assignment-desc">@item.Description</p>

                        <div class="meta">
                            <span><i class="bi bi-calendar-event"></i> B·∫Øt ƒë·∫ßu: @item.AvailableFrom?.ToString("dd/MM/yyyy HH:mm")</span>
                            <span><i class="bi bi-clock"></i> H·∫°n n·ªôp: @item.AvailableUntil?.ToString("dd/MM/yyyy HH:mm")</span>
                        </div>

                        <div class="meta">
                            <span><i class="bi bi-star"></i> ƒêi·ªÉm t·ªëi ƒëa: <strong>@item.MaxScore</strong></span>
                            <span><i class="bi bi-tag"></i> Lo·∫°i: @item.Type</span>
                        </div>
                    </div>

                    <div class="assignment-actions">
                        <!-- üîì Tr·∫°ng th√°i c√¥ng khai -->
                        <div class="assignment-status">
                            @if (item.IsPublic)
                            {
                                <span class="badge bg-success">
                                    <i class="bi bi-globe"></i> C√¥ng khai
                                </span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">
                                    <i class="bi bi-lock"></i> Kh√¥ng c√¥ng khai
                                </span>
                            }
                        </div>

                        <!-- üïí Tr·∫°ng th√°i h·∫°n -->
                        <div class="assignment-status">
                            @if (item.IsExpired)
                            {
                                <span class="badge bg-danger"><i class="bi bi-x-circle"></i> ƒê√£ h·∫øt h·∫°n</span>
                            }
                            else
                            {
                                <span class="badge bg-primary"><i class="bi bi-check-circle"></i> C√≤n h·∫°n</span>
                            }
                        </div>

                        <!-- üõ†Ô∏è C√°c n√∫t -->
                        <div class="buttons">
                            <a asp-action="EditAssignment" asp-route-id="@item.Id" class="btn btn-sm btn-outline-primary" title="S·ª≠a">
                                <i class="bi bi-pencil"></i>
                            </a>
                            <button class="btn btn-sm btn-outline-danger btn-delete" data-id="@item.Id" title="X√≥a">
                                <i class="bi bi-trash"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success btn-public" data-id="@item.Id" title="C√¥ng khai / ·∫®n">
                                <i class="bi @(item.IsPublic ? "bi-lock" : "bi-globe2")"></i>
                            </button>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <p class="text-center text-muted mt-4">Ch∆∞a c√≥ b√†i t·∫≠p n√†o ƒë∆∞·ª£c t·∫°o.</p>
    }
</div>
   

@section Scripts {

    <script src="~/js/Instructor/Assignment/Assignment.js" asp-append-version="true"></script>
}
